!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ObservableData=e():t.ObservableData=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=8)}([function(t,e,n){"use strict";var r=n(11);n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";function r(){return a.has(this)||(a.set(this,{listeners:{},pipes:new c.a,all:new c.a}),this.onDestroy&&this.onDestroy(function(){a.has(this)&&a.delete(this)}.bind(this))),a.get(this)}function i(t){return"string"==typeof t?t.split(/\s+/):[t]}var o=n(5),u=n(2),c=n(0),a=u.a.create(),f=Function.call.bind(Array.prototype.slice),s=function(t){return"function"==typeof t},l=Object.keys,d=o.a.extend({on:function(t,e){var n=this,o=r.call(this),u=o.all,a=o.listeners,f=i(t).reduce(function(t,r){var i=void 0;return r===n?(u.add(e),i=function(){return u.delete(e)}):(r in a||(a[r]=new c.a),a[r].add(e),i=function(){return a[r].delete(e)}),t[r]={off:i},t},{}),s={off:function(){l(f).forEach(function(t){return f[t].off()})}};return s.listeners=f,s},off:function(t,e){var n=r.call(this),i=n.all,o=n.listeners;if(t===this)return void i.delete(e);o[t]&&o.delete(e)},once:function(t,e){var n=this,r=i(t).reduce(function(r,i){var o=n.on(t,function(){o.off(),e.apply(void 0,arguments)});return r[i]=o,r},{}),o={off:function(){l(r).forEach(function(t){return r[t].off()})}};return o.listeners=r,o},emit:function(t){if("*"===t||t===this)return void console.log("EventEmitter#emit(): can not emit to events to '*'");var e=r.call(this),n=e.listeners,i=e.pipes,o=e.all,u=f(arguments,1),c=!1,a=function(t){if(s(t)){if(!0===t.apply(t,u))return c=!0,!0}};if(n[t]&&n[t].size){var l=!0,d=!1,h=void 0;try{for(var p,v=n[t][Symbol.iterator]();!(l=(p=v.next()).done);l=!0){if(a(p.value))break}}catch(t){d=!0,h=t}finally{try{!l&&v.return&&v.return()}finally{if(d)throw h}}}if(!c&&("*"in n||o.size)){if(u=f(arguments,0),u.push(this),n["*"]&&n["*"].size){var y=!0,b=!1,O=void 0;try{for(var j,m=n["*"][Symbol.iterator]();!(y=(j=m.next()).done);y=!0){if(a(j.value))break}}catch(t){b=!0,O=t}finally{try{!y&&m.return&&m.return()}finally{if(b)throw O}}}if(o.size){var g=!0,_=!1,w=void 0;try{for(var A,x=o[Symbol.iterator]();!(g=(A=x.next()).done);g=!0){if(a(A.value))break}}catch(t){_=!0,w=t}finally{try{!g&&x.return&&x.return()}finally{if(_)throw w}}}u=f(arguments,1)}if(i.size){var E=!0,D=!1,P=void 0;try{for(var k,S=i[Symbol.iterator]();!(E=(k=S.next()).done);E=!0){var F=k.value;F&&F(t,u)}}catch(t){D=!0,P=t}finally{try{!E&&S.return&&S.return()}finally{if(D)throw P}}}},pipe:function(t,e,n){var i=this;if(!t||!t.emit)return{off:function(){}};var o=r.call(this).pipes,u=function(r,o){e?o.unshift(e+r):o.unshift(r),(n||void 0===n)&&o.push(i),t.emit.apply(t,o)};return o.add(u),{off:function(){o.delete(u)}}},hasListeners:function(){var t=r.call(this),e=t.listeners,n=t.pipes;return l(e).some(function(t){return!!e[t].size})||!!n.size},destroy:function(){o.a.prototype.destroy.call(this,!0)}});d.mixin=function(t){t&&["on","off","emit","once","pipe"].forEach(function(e){Object.defineProperty(t,e,{configurable:!0,value:d.prototype[e].bind(t)})})},e.a=d},function(t,e,n){"use strict";"undefined"==typeof WeakMap&&function(){var t=Object.defineProperty,e=Date.now()%1e9,n=function(){this.name="__st"+(1e9*Math.random()>>>0)+e+++"__"};n.prototype={set:function(e,n){var r=e[this.name];return r&&r[0]===e?r[1]=n:t(e,this.name,{value:[e,n],writable:!0}),this},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:void 0},delete:function(t){var e=t[this.name];return!(!e||e[0]!==t)&&(e[0]=e[1]=void 0,!0)},has:function(t){var e=t[this.name];return!!e&&e[0]===t}},window.WeakMap=n}();var r={stash:new WeakMap,create:function(){return new WeakMap}};e.a=r},function(t,e,n){"use strict";var r=/native code/i,i=function(){function t(){setTimeout(function(){n.shift()(),n.length?t():i=!1},0)}if("undefined"!=typeof setImediate&&r.test(setImediate.toString()))return setImediate;if("function"==typeof Promise&&r.test(Promise.toString())){var e=Promise.resolve();return function(t){e.then(t).catch(function(t){return console.log(t)})}}var n=[],i=!1;return function(e){n.push(e),i||(i=!0,t())}}();e.a=i},function(t,e,n){"use strict";function r(t){t&&j.add(t)}function i(t){t&&j.delete(t)}function o(t){t&&g(p,t)}function u(t){t&&j.size&&j.forEach(function(e){return t.add(e)})}n.d(e,"d",function(){return d}),n.d(e,"a",function(){return p}),n.d(e,"c",function(){return y}),n.d(e,"b",function(){return b}),n.d(e,"f",function(){return O}),n.d(e,"j",function(){return m}),n.d(e,"g",function(){return _}),n.d(e,"e",function(){return w}),n.d(e,"i",function(){return A}),n.d(e,"h",function(){return x}),n.d(e,"m",function(){return E}),e.l=r,e.p=i,e.n=o,n.d(e,"k",function(){return D}),e.o=u;var c=n(1),a=n(3),f=n(2),s=n(0),l=function(){},d=f.a.create(),h=c.a.create(),p="1",v=Array.prototype,y=Object.prototype,b="__od_cn__",O=Function.call.bind.bind(Function.call),j=new s.a,m=h.on.bind(h),g=h.emit.bind(h),_=Array.isArray,w=(O(v.indexOf),O(v.splice),O(v.forEach)),A=function(t){return t&&"[object Object]"===y.toString.call(t)},x=function(t){return t&&t.___observable_data___===l},E=function(t){return t&&Object.defineProperty(t,"___observable_data___",{get:function(){return l}})},D=function(){var t=new s.a,e=function(){t.forEach(function(t){return t()}),t.clear()};return function(n){if(n[b])return void n();if(n&&!t.has(n)){var r=!t.size;t.add(n),r&&Object(a.a)(e)}}}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t){var e=void 0,n=[];for(e in t)n.push(e);return n}function c(t,e){return function(){t&&Object.keys(t).forEach(function(e){t[e]&&(p.some(function(n){if(t[e][n]&&("remove"!==n||!(t[e]instanceof Node)))return t[e][n](),!0}),t[e]=void 0)}),e&&e.has&&e.has(t)&&e.delete(t)}}function a(t){return h.has(t)||h.set(t,[]),h.get(t)}function f(t){"function"==typeof t&&t()}var s=n(6),l=n(2),d=n(10),h=l.a.create(),p=["destroy","remove","off"],v=(Object.create,{isDestroyed:!1,init:function(){},destroy:function(t){if(h.has(this)){var e=h.get(this);h.delete(this),t?e.forEach(f):Object(d.a)(function(){return e.forEach(f)})}"boolean"==typeof this.isDestroyed&&(this.isDestroyed=!0)},onDestroy:function(t){a(this).push(t)},getFactory:function(){if(this.constructor)return this.constructor}}),y={extend:function(){for(var t=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),e}(this),e=arguments.length,n=Array(e),c=0;c<e;c++)n[c]=arguments[c];return Object(s.a)(t.prototype,n.reduce(function(t,e){if(e){var n=e.prototype||e;u(n).forEach(function(e){t[e]=n[e]})}return t},{})),t},isInstanceOf:function(t){return!!t&&!u(this.prototype).some(function(e){return void 0===t[e]})},create:function(){return new(Function.prototype.bind.apply(this,[null].concat(Array.prototype.slice.call(arguments))))},getDestroyCallback:c},b=function(){function t(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return this&&this.constructor&&this instanceof this.constructor?this.init.apply(this,n):new(Function.prototype.bind.apply(t,[null].concat(n)))}return t.prototype.constructor=t,t}();Object(s.a)(b.prototype,v),Object(s.a)(b,y),e.a=b},function(t,e,n){"use strict";function r(t){for(var e=t||{},n=arguments.length,u=Array(n>1?n-1:0),c=1;c<n;c++)u[c-1]=arguments[c];var a=u.length,f=!1,s=void 0,l=void 0;for("boolean"==typeof t&&(f=t,e=u.shift()||{},a=u.length),s=0;s<a;s++)if(u[s])for(l in u[s])u[s].hasOwnProperty(l)&&(f&&o(e[l])===i&&o(u[s][l])===i?e[l]=r(!0,e[l],u[s][l]):e[l]=u[s][l]);return e}var i="[object Object]",o=Function.call.bind(Object.prototype.toString);e.a=r},function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"a",function(){return a});var r=Function.bind.call.bind(Function.bind),i=r(Function.call.bind,Function.call),o=Object.defineProperty,u=Object.defineProperties,c=(Object.keys,[]),a=(i(c.forEach),i(c.indexOf));i(c.splice)},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];Object(c.e)(e,function(t){Object(c.h)(t)||(Object(c.i)(t)?Object(u.b)(t,null,!0,function(t){t&&Object(c.g)(t)&&i(t)}):Object(c.g)(t)&&(Object(o.b)(t),i.apply(void 0,r(t))))})}Object.defineProperty(e,"__esModule",{value:!0}),e.observeAll=i;var o=n(9),u=n(15),c=n(4);n.d(e,"ObservableArray",function(){return o.a}),n.d(e,"ObservableObject",function(){return u.a})},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t){if(!d.d.has(t)){var e=new l.a,n=!1,i=null,o=function(t){t&&(i||(i=a()),v(t).forEach(function(e){var n;t[e]&&(i[e]||(i[e]=[]),(n=i[e]).push.apply(n,r(t[e])))}))},u={dependees:e,notify:function(r){e.forEach(function(t){return Object(d.k)(t)}),o(r),n||(n=!0,Object(s.a)(function(){var e=i;i=null,y(t,"change",e),n=!1}))}};d.d.set(t,u);var c=Object(d.j)(d.a,function(t){e.delete(t)});t.onDestroy&&t.onDestroy(function(){e.clear(),c.off(),d.d.delete(t)})}return d.d.get(t)}function o(t){if(!Object(d.h)(t)){Object(d.m)(t);var e=t.__proto__,n=void 0;return d.d.has(e)?n=d.d.get(e):(n=Object.create(e),Object.getOwnPropertyNames(h).forEach(function(t){if("constructor"!==t&&"function"==typeof h[t]){var e=n[t],r=-1!==b.indexOf(t),o=-1!==O.indexOf(t),f=-1!==j.indexOf(t),s="splice"===t;p(n,t,{value:function(){var t=this;Object(d.o)(i(this).dependees);for(var n=arguments.length,l=Array(n),h=0;h<n;h++)l[h]=arguments[h];var v=e.call.apply(e,[this].concat(l));if(Object(d.g)(v)&&v!==this&&p(v,"toObservable",{value:function(){return t.getFactory?t.getFactory().create(v):c(v)}}),r){var y=a();o&&(s?l.length>2&&(y.added=l.slice(2)):y.added=l),f&&(y.removed=s?v:[v]),u(this,y)}return v},writable:!0,configurable:!0})}}),p(n,"len",{get:function(){return Object(d.o)(i(this).dependees),this.length},set:function(t){var e=this.length=t;return u(this),e},configurable:!0}),d.d.set(e,n)),t.__proto__=n,t}}function u(t,e){i(t).notify(e)}function c(t){return Object(d.g)(t)||(t=[]),m.create(t)}function a(){return{added:null,removed:null,updated:null}}e.b=c;var f=n(1),s=n(3),l=n(0),d=n(4),h=Array.prototype,p=Object.defineProperty,v=Object.keys,y=Object(d.f)(f.a.prototype.emit),b=["pop","push","shift","splice","unshift","sort","reverse"],O=["push","splice","unshift"],j=["pop","shift","splice"],m=f.a.extend({size:function(){return Object(d.o)(i(this).dependees),this.length},item:function(t){var e=h.slice.call(arguments,0),n=this;if(Object(d.o)(i(this).dependees),1===e.length)return n[t];var r=a();n[t]===e[1]?r.updated=[e[1]]:(r.removed=[n[t]],r.added=[e[1]]);var o=n[t]=e[1];return u(n,r),o}});p(m,"create",{value:function(t){var e=t||[],n=this.prototype;if(Object(d.h)(e))return e;o(e);var r=e.__proto__;for(var i in n)p(r,i,{value:n[i],writable:!0,configurable:!0});return e.init&&e.init.apply(e,arguments),e}}),e.a=m},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t){"function"==typeof t&&(c.add(t),a||(a=setTimeout(o,0)))}function o(){var t=[].concat(r(c));c.clear(),a=null;for(var e=void 0;e=t.shift();)e(),e=null}var u=n(0),c=new u.a,a=void 0;e.a=i},function(t,e,n){"use strict";function r(){}n.d(e,"a",function(){return c});var i=n(12),o=n(14),u=n(7),c=Object(i.a)().Set||r;Object(u.b)(r.prototype,{constructor:{value:r,configurable:!0},_:{get:function(){var t=[];return Object(u.c)(this,"_",{value:t}),t}},add:{value:function(t){return-1===Object(u.a)(this._,t)&&this._.push(t),this}},has:{value:function(t){return-1!==Object(u.a)(this._,t)}},size:{get:function(){return this._.length}},clear:{value:function(){this._.splice(0)}},delete:{value:function(t){var e=Object(u.a)(this._,t);return-1!==e&&(this._.splice(e,1),!0)}},values:{value:function(){return new o.a(this._)}},entries:{value:function(){return new o.a(this._,this._)}},forEach:{value:function(t){var e=this;this._.forEach(function(n){return t(n,n,e)})}}})},function(t,e,n){"use strict";(function(t){function n(){return r}var r=function(){return"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:Function("return this;")()}();e.a=n}).call(e,n(13))},function(t,e){var n,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":r(window))&&(n=window)}t.exports=n},function(t,e,n){"use strict";function r(t,e){Object(i.c)(this,"_",{value:{keys:t.slice(0),values:e?e.slice(0):null,idx:0,total:t.length}})}e.a=r;var i=n(7),o="undefined"!=typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";Object(i.b)(r.prototype,{constructor:{value:r},next:{enumerable:!0,configurable:!0,value:function(){var t={done:this._.idx===this._.total};if(t.done)return t.value=void 0,t;var e=this._.idx++;return t.value=this._.keys[e],this._.values&&(t.value=[t.value,this._.values[e]]),t}}}),Object(i.c)(r.prototype,o,{value:function(){return this}})},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t){if(!j.d.has(t)){var e=y.a.create(),n=e.watched={},r=!1;Object(j.m)(t),e.opt=Object(v.a)({},E.defaults),e.notify=function(){r||(r=!0,Object(b.a)(function(){e.emit(""),r=!1}))},j.d.set(t,e),t.onDestroy&&t.onDestroy(function(){A(n).forEach(function(t){n[t].destroy(),delete n[t]}),delete e.watched,j.d.delete(t),e.destroy()}.bind(t))}return j.d.get(t)}function o(t,e,n,r){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],u=i(t),c=u.watched;if(c[e])return u;var f=void 0,s=!(e in t),l=Object.getOwnPropertyDescriptor(t,e);if(l){if(!1===l.configurable)return;n=n||l.get,r=r||l.set,n||(f=l.value)}if(delete t[e]){var d=c[e]=D.create(t,e);d.oldVal=d.newVal=f,_(t,e,{enumerable:o,configurable:!0,get:function(){return d.storeDependees(),n?n():d.newVal},set:function(e){if(!d.isComputed){var i=n?n():d.newVal;r?e=r.call(t,e):(d.oldVal=i,d.newVal=e),e!==i&&(u.opt.deep&&e&&Object(j.i)(e)&&a(e,null,!0),d.notify())}}})}else console.log(new Error("Unable to watch property ["+e+"] - delete failed"));return s&&u.notify(),u}function u(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t&&e&&n){var u=!0,c=void 0,a=function(){t[e]="",c=null,u=!0,i(t).watched[e].notify()},f=function(){if(!u)return c;Object(j.l)(a);try{c=n.call(t)}catch(t){throw Object(j.p)(a),t}return Object(j.p)(a),u=!1,c},s=function(){return c},l=i(t);return a[j.b]=!0,e in l.watched&&(l.watched[e].destroy(),delete l.watched[e]),o(t,e,f,s,r),l.watched[e].isComputed=!0,l.watched[e].onDestroy(function(){Object(j.n)(a),delete l.watched[e],delete t[e],t[e]=c}),Object.create({destroy:function(){l.watched[e]&&l.watched[e].destroy(!0)}})}}function c(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.length&&Object(j.e)(n,function(e){Object(j.e)(A(e),function(n){o(t,n),t[n]=e[n]})}),t}function a(t,e,n,r){t&&(e?o(t,e):Object(j.e)(A(t),function(e){return o(t,e)}),n&&Object(j.e)(A(t),function(e){t[e]&&Object(j.i)(t[e])&&a(t[e],null,n,r),r&&r(t[e])}))}function f(t,e,n){var r=i(t);return e===t?r.on(r,n):w(t,e)?(o(t,e),r.on(e,n)):x}function s(t,e,n){var r=i(t);return e===t?r.once(r,n):w(t,e)?(o(t,e),r.once(e,n)):x}function l(t,e,n){return i(t).off(e,n)}function d(t,e){var n=i(t).watched;n[e]&&n[e].notify(!0)}function h(t){return t&&Object(j.e)(A(E.prototype),function(e){e in t&&t[e]===E.prototype[e]||_(t,e,{value:E.prototype[e],enumerable:!1,configurable:!0})}),t}e.b=a;var p=n(5),v=n(6),y=n(1),b=n(3),O=n(0),j=n(4),m=Object,g=m.create,_=m.defineProperty,w=Object(j.f)(j.c.hasOwnProperty),A=Object.keys,x=g({off:function(){}}),E=p.a.extend({init:function(t,e){var n=Object(v.a)({},this.getFactory().defaults,e);t&&(Object(v.a)(this,t),n.watchAll&&a(this,null,n.deep),i(this).opt=n)},on:function(t,e){return f(this,t,e)},off:function(t,e){l(this,t,e)},once:function(t,e){return s(this,t,e)},emit:function(t){return d(this,t)},assign:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return c.apply(void 0,[this].concat(r(e)))},setProp:function(t,e){return o(this,t),this[t]=e}}),D=p.a.extend({init:function(t,e){var n=this;this.dependees=new O.a,this.propName=e,this._obj=t,this.onDestroy(function(){n.dependees.clear(),n.rmDepEvListener&&n.rmDepEvListener.off(),n._obj=null})},propName:"",dependees:null,oldVal:null,newVal:null,queued:!1,isComputed:!1,notify:function(t){var e=this,n=this;if(this.dependees.forEach(function(t){return Object(j.k)(t)}),!n.queued){if(n.queued=!0,t)return void this._emit();Object(b.a)(function(){return e._emit()})}},_emit:function(){this.queued=!1,i(this._obj).emit(this.propName,this.newVal,this.oldVal),this.oldVal=null},removeDependee:function(t){this.dependees.delete(t),this.rmDepEvListener&&0===this.dependees.size&&(this.rmDepEvListener.off(),this.rmDepEvListener=null)},storeDependees:function(){Object(j.o)(this.dependees),this.dependees.size>0&&!this.rmDepEvListener&&(this.rmDepEvListener=Object(j.j)(j.a,this.removeDependee.bind(this)))}});E.createComputed=u,E.mixin=h,E.defaults={watchAll:!0,deep:!0},e.a=E}])});
//# sourceMappingURL=ObservableData.js.map