!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ObservableData=e():t.ObservableData=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=6)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),"undefined"==typeof WeakMap&&function(){var t=Object.defineProperty,e=Date.now()%1e9,n=function(){this.name="__st"+(1e9*Math.random()>>>0)+e+++"__"};n.prototype={set:function(e,n){var r=e[this.name];return r&&r[0]===e?r[1]=n:t(e,this.name,{value:[e,n],writable:!0}),this},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:void 0},delete:function(t){var e=t[this.name];return!(!e||e[0]!==t)&&(e[0]=e[1]=void 0,!0)},has:function(t){var e=t[this.name];return!!e&&e[0]===t}},window.WeakMap=n}();var r={stash:new WeakMap,create:function(){return new WeakMap}};e.default=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){return s.has(this)||(s.set(this,{listeners:{},pipes:[],all:[]}),this.onDestroy&&this.onDestroy(function(){s.has(this)&&s.delete(this)}.bind(this))),s.get(this)}function i(t){return"string"==typeof t?t.split(/\s+/):[t]}Object.defineProperty(e,"__esModule",{value:!0});var u=n(4),c=r(u),f=n(0),a=r(f),s=a.default.create(),l=Function.call.bind(Array.prototype.slice),d=function(t){return"function"==typeof t},p=Object.create,h=Object.keys,b=c.default.extend({on:function(t,e){var n=this,r=o.call(this),u=r.all,c=r.listeners,f=i(t).reduce(function(t,r){var o=void 0,i=void 0;return r===n?(u.push(e),o=u.length-1,i=function(){return u[o]=null}):(r in c||(c[r]=[]),c[r].push(e),o=c[r].length-1,i=function(){return c[r][o]=null}),t[r]=p({off:i}),t},{}),a=p({off:function(){h(f).forEach(function(t){return f[t].off()})}});return a.listeners=f,a},off:function(t,e){var n=o.call(this),r=n.all,i=n.listeners,u=function(n,r){if(n===e)return i[t][r]=null,!0};if(t===this)return void r.some(u);t in i&&i[t].some(u)},once:function(t,e){var n=this,r=i(t).reduce(function(r,o){var i=n.on(t,function(){i.off(),e.apply(void 0,arguments)});return r[o]=i,r},{}),o=p({off:function(){h(r).forEach(function(t){return r[t].off()})}});return o.listeners=r,o},emit:function(t){if("*"!==t&&t!==this){var e=o.call(this),n=e.listeners,r=e.pipes,i=e.all,u=l(arguments,1),c=!1,f=function(t){if(d(t)){var e=t.apply(t,u);if(e&&"boolean"==typeof e)return c=!0,!0}};t in n&&(n[t]||[]).some(f),!c&&("*"in n||i.length)&&(u=l(arguments,0),u.push(this),(n["*"]||[]).concat(i).some(f),u=l(arguments,1)),r.forEach(function(e){d(e)&&e(t,u)})}else try{console.warning("EventEmitter#emit(): can not emit to events to '*'")}catch(t){}},pipe:function(t,e,n){if(!t||!t.on)return p({off:function(){}});var r,i=o.call(this).pipes;return i.push(function(r,o){e?o.unshift(e+r):o.unshift(r),(n||void 0===n)&&o.push(this),t.emit.apply(t,o)}.bind(this)),r=i.length-1,p({off:function(){i[r]=null}})},hasListeners:function(){var t=o.call(this),e=t.listeners,n=t.pipes;return h(e).some(function(t){return e[t].some(function(t){return!!t})})||n.some(function(t){return!!t})}});b.mixin=function(t){t&&["on","off","emit","once","pipe"].forEach(function(e){Object.defineProperty(t,e,{configurable:!0,value:b.prototype[e].bind(t)})})},e.default=b},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=/native code/i,o=function(){function t(){setTimeout(function(){n.shift()(),n.length?t():o=!1},0)}if("undefined"!=typeof setImediate&&r.test(setImediate.toString()))return setImediate;if("function"==typeof Promise&&r.test(Promise.toString())){var e=Promise.resolve();return function(t){e.then(t).catch(function(t){return console.log(t)})}}var n=[],o=!1;return function(e){n.push(e),o||(o=!0,t())}}();e.default=o},function(t,e,n){"use strict";function r(t){t&&-1===m(y,t)&&y.push(t)}function o(t){if(t){var e=m(y,t);-1!==e&&_(y,e,1)}}function i(t){t&&j(d,t)}function u(t){t&&y.length&&w(y,function(e){-1===m(t,e)&&t.push(e)})}n.d(e,"a",function(){return d}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return b}),n.d(e,"g",function(){return v}),n.d(e,"j",function(){return O}),n.d(e,"h",function(){return g}),n.d(e,"e",function(){return m}),n.d(e,"f",function(){return _}),n.d(e,"d",function(){return w}),n.d(e,"i",function(){return A}),e.l=r,e.o=o,e.m=i,n.d(e,"k",function(){return P}),e.n=u;var c=n(1),f=n.n(c),a=n(2),s=n.n(a),l=f.a.create(),d="1",p=Array.prototype,h="__od_cn__",b=Object.prototype,v=Function.call.bind.bind(Function.call),y=[],O=l.on.bind(l),j=l.emit.bind(l),g=Array.isArray,m=v(p.indexOf),_=v(p.splice),w=v(p.forEach),A=function(t){return t&&"[object Object]"===b.toString.call(t)},P=function(){var t=[],e=function(){return w(_(t,0),function(t){return t()})};return function(n){if(n&&-1===m(t,n)){if(n[h])return void n();var r=!t.length;t.push(n),r&&s()(e)}}}()},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=void 0,n=[];for(e in t)n.push(e);return n}function i(t){return s.has(t)||s.set(t,[]),s.get(t)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(5),c=r(u),f=n(0),a=r(f),s=a.default.create(),l=Object.create,d={isDestroyed:!1,init:function(){},destroy:function(){s.has(this)&&(s.get(this).forEach(function(t,e){"function"==typeof t&&t()}),s.delete(this)),"boolean"==typeof this.isDestroyed&&(this.isDestroyed=!0)},onDestroy:function(t){i(this).push(t)},getFactory:function(){}},p={extend:function(){for(var t=function(){},e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.prototype=n.reduce(function(t,e){if(e){var n=e.prototype||e;o(n).forEach(function(e){t[e]=n[e]})}return t},l(this.prototype)),t.prototype.getFactory=function(){return t},(0,c.default)(!0,t,this)},isInstanceOf:function(t){return!!t&&!o(this.prototype).some(function(e){return void 0===t[e]})},create:function(){var t=l(this.prototype);return t.init&&t.init.apply(t,arguments),t},getDestroyCallback:function(t,e){return function(){t&&Object.keys(t).forEach(function(e){t[e]&&(["destroy","remove","off"].some(function(n){if(t[e][n])return t[e][n](),!0}),t[e]=void 0)}),e&&e.has&&e.has(t)&&e.delete(t)}}},h=function(){};h.prototype=l(d),(0,c.default)(h,p),e.default=h},function(t,e,n){"use strict";function r(t){for(var e=t||{},n=arguments.length,u=Array(n>1?n-1:0),c=1;c<n;c++)u[c-1]=arguments[c];var f=u.length,a=!1,s=void 0,l=void 0;for("boolean"==typeof t&&(a=t,e=u.shift()||{},f=u.length),s=0;s<f;s++)if(u[s])for(l in u[s])u[s].hasOwnProperty(l)&&(a&&i(e[l])===o&&i(u[s][l])===o?e[l]=r(!0,e[l],u[s][l]):e[l]=u[s][l]);return e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var o="[object Object]",i=Function.call.bind(Object.prototype.toString)},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];Object(c.d)(e,function(t){Object(c.i)(t)?Object(u.b)(t,null,!0,function(t){t&&Object(c.h)(t)&&o(t)}):Object(c.h)(t)&&(Object(i.b)(t),o.apply(void 0,r(t)))})}Object.defineProperty(e,"__esModule",{value:!0}),e.observeAll=o;var i=n(7),u=n(8),c=n(3);n.d(e,"ObservableArray",function(){return i.a}),n.d(e,"ObservableObject",function(){return u.a})},function(t,e,n){"use strict";function r(t){if(!h.has(t)){var e=[],n=!1,r={dependees:e,notify:function(){Object(p.d)(e,function(t){return Object(p.k)(t)}),n||d()(function(){f.a.prototype.emit.call(t,"change"),n=!1})}};h.set(t,r);var o=Object(p.j)(p.a,function(t){var n=Object(p.e)(e,t);-1!==n&&Object(p.f)(e,n,1)});t.onDestroy&&t.onDestroy(function(){e.splice(0),o.off(),h.delete(t)})}return h.get(t)}function o(t){if(!j(t)){y(t,b,{get:function(){return O}});var e=Object.create(t.__proto__);return Object.getOwnPropertyNames(v).forEach(function(n){if("constructor"!==n&&"function"==typeof v[n]){var o=e[n].bind(t),u=-1!==g.indexOf(n);y(e,n,{value:function(){Object(p.n)(r(this).dependees);var t=o.apply(void 0,arguments);return Object(p.h)(t)&&t!==this&&this.getFactory&&(t=this.getFactory().create(t)),u&&i(this),t},writable:!0,configurable:!0})}}),y(e,"len",{get:function(){return Object(p.n)(r(this).dependees),this.length},set:function(t){var e=this.length=t;return i(this),e},configurable:!0}),t.__proto__=e,t}}function i(t){r(t).notify()}function u(t){return Object(p.h)(t)||(t=[]),m.create(t)}e.b=u;var c=n(1),f=n.n(c),a=n(0),s=n.n(a),l=n(2),d=n.n(l),p=n(3),h=s.a.create(),b="___observable_array___",v=Array.prototype,y=Object.defineProperty,O=function(){},j=function(t){return t[b]===O},g=["pop","push","shift","splice","unshift","sort","reverse"],m=f.a.extend({size:function(){return Object(p.n)(r(this).dependees),this.length},item:function(t){var e=v.slice.call(arguments,0),n=this;if(Object(p.n)(r(this).dependees),1===e.length)return n[t];var o=n[t]=e[1];return i(n),o}});y(m,"create",{value:function(t){var e=t||[],n=this.prototype;if(j(e))return e;o(e);for(var r in n)y(e,r,{value:n[r],writable:!0,configurable:!0});return e.init&&e.init.apply(e,arguments),e}}),e.a=m},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t){if(!P.has(t)){var e=m.a.create(),n=e.watched={};e.opt=y()({},F.defaults);var r=!1;e.notify=function(){r||(r=!0,w()(function(){e.emit(""),r=!1}))},P.set(t,e),t.onDestroy&&t.onDestroy(function(){k(n).forEach(function(t){n[t].destroy(),delete n[t]}),delete e.watched,P.delete(t),e.destroy()}.bind(t))}return P.get(t)}function i(t,e,n,r){var i=o(t),u=i.watched;if(u[e])return i;var c=void 0,a=!(e in t),s=Object.getOwnPropertyDescriptor(t,e);if(s){if(!1===s.configurable)return;n=n||s.get,r=r||s.set,n||(c=s.value)}if(delete t[e]){var l=u[e]=C.create(t,e),d=l.dependees;l.oldVal=l.newVal=c,M(t,e,{enumerable:!0,configurable:!0,get:function(){return Object(A.n)(d),n?n():l.newVal},set:function(e){if(!l.isComputed){var o=n?n():l.newVal;r?e=r.call(t,e):(l.oldVal=o,l.newVal=e),e!==o&&(i.opt.deep&&e&&Object(A.i)(e)&&f(e,null,!0),l.notify())}}})}else console.log(new Error("Unable to watch property ["+e+"] - delete failed"));return a&&i.notify(),i}function u(t,e,n){if(t&&e&&n){var r=!0,u=void 0,c=function(){t[e]="",u=null,r=!0,o(t).watched[e].notify()},f=function(){if(!r)return u;Object(A.l)(c);try{u=n.call(t)}catch(t){throw Object(A.o)(c),t}return Object(A.o)(c),r=!1,u},a=function(){return u};c[A.b]=!0;var s=i(t,e,f,a);s.watched[e].isComputed=!0;var l=!1,d=function(){l||(l=!0,Object(A.m)(c),s.watched[e].destroy(),delete s.watched[e],delete t[e],t[e]=u)};return Object.create({destroy:d})}}function c(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.length&&Object(A.d)(n,function(e){Object(A.d)(k(e),function(n){i(t,n),t[n]=e[n]})}),t}function f(t,e,n,r){t&&(e?i(t,e):Object(A.d)(k(t),function(e){return i(t,e)}),n&&Object(A.d)(k(t),function(e){t[e]&&Object(A.i)(t[e])&&f(t[e],null,n),r&&r(t[e])}))}function a(t,e,n){var r=o(t);return e===t?r.on(r,n):E(t,e)?(i(t,e),r.on(e,n)):V}function s(t,e,n){var r=o(t);return e===t?r.once(r,n):E(t,e)?(i(t,e),r.once(e,n)):V}function l(t,e,n){return o(t).off(e,n)}function d(t,e){var n=o(t).watched;n[e]&&n[e].notify(!0)}function p(t){return t&&Object(A.d)(k(F.prototype),function(e){e in t&&t[e]===F.prototype[e]||M(t,e,{value:F.prototype[e],enumerable:!1,configurable:!0})}),t}e.b=f;var h=n(4),b=n.n(h),v=n(5),y=n.n(v),O=n(0),j=n.n(O),g=n(1),m=n.n(g),_=n(2),w=n.n(_),A=n(3),P=j.a.create(),x=Object,D=x.create,M=x.defineProperty,E=Object(A.g)(A.c.hasOwnProperty),k=Object.keys,V=D({off:function(){}}),F=b.a.extend({init:function(t,e){var n=y()({},this.getFactory().defaults,e);t&&(y()(this,t),n.watchAll&&f(this,null,n.deep),o(this).opt=n)},on:function(t,e){return a(this,t,e)},off:function(t,e){l(this,t,e)},once:function(t,e){return s(this,t,e)},emit:function(t){return d(this,t)},assign:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return c.apply(void 0,[this].concat(r(e)))},setProp:function(t,e){return i(this,t),this[t]=e}}),C=b.a.extend({init:function(t,e){var n=this,r=this.dependees=[];this.propName=e,this._obj=t;var o=Object(A.j)(A.a,function(t){var e=Object(A.e)(r,t);-1!==e&&Object(A.f)(r,e,1)});this.onDestroy(function(){Object(A.f)(n.dependees,0),o.off(),n._obj=null})},propName:"",dependees:null,oldVal:null,newVal:null,queued:!1,isComputed:!1,notify:function(t){var e=this,n=this;if(Object(A.d)(this.dependees,function(t){return Object(A.k)(t)}),!n.queued){n.queued=!0;var r=function(){var t=e.propName,r=e._obj;n.queued=!1,o(r).emit(t,n.newVal,n.oldVal),n.oldVal=null};if(t)return void r();w()(function(){return r()})}}});F.createComputed=u,F.mixin=p,F.defaults={watchAll:!0,deep:!0},e.a=F}])});
//# sourceMappingURL=ObservableData.js.map